<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <meta http-equiv="Content-Type" content="text/ html; charset=UTF-8" />
</head>
<body>
    <div id="container">
        <header>
            Seva <i>Rybakov</i>
        </header>
        <section id="content">
            
        </section>
        <!--Templates-->
        <script id="post-template" type="text/x-handlebars-template">
          <article>
            {{text}}
          </article>
        </script>
        <script src="js/vendor/zepto.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/vendor/handlebars.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/vendor/showdown.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript">
            var converter = new Showdown.converter();
            
            var postTemplate = Handlebars.compile(
                    $('#post-template').html()
                );
            
            var autoRefresh = function() {
                $.get('/posts/latest', function(text) {
                    var postHtml = converter.makeHtml(text);
                    $('#content').html(postHtml);
                });
            }
            
            setInterval(autoRefresh, 300);
        </script>
    </div>
</body>
